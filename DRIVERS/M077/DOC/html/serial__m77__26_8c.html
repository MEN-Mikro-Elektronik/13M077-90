<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - Linux native Driver for M45N/M69N/M77 UART Modules - serial_m77_26.c File Reference</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">Linux native Driver for M45N/M69N/M77 UART Modules &nbsp; </h1>
	<h3>serial_m77_26.c File Reference</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>serial_m77_26.c File Reference</h1>Kernel 2.6 driver for M77 modules Attention: Instanciate carrier Board MDIS device prior to modprobe'ing this driver!  
<a href="#_details">More...</a>
<p>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmen__uart__config.html">men_uart_config</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This replaces serial_uart_config in include/linux/serial.h. </em> <a href="structmen__uart__config.html#_details">More...</a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structox16c954__port.html">ox16c954_port</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The central Oxford 16C950 UART port struct. </em> <a href="structox16c954__port.html#_details">More...</a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structplat__men__uart__port.html">plat_men_uart_port</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the platform device platform_data structure. </em> <a href="structplat__men__uart__port.html#_details">More...</a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structuartmod.html">uartmod</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maintain central per-M-Module Info about each M45N/M69N/M77 For M77/M69N 4 structs are allocated, for M45N 8. </em> <a href="structuartmod.html#_details">More...</a><em><br><br></td></tr>
<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a20" doxytag="serial_m77_26.c::UARTMOD_INFO"></a>
typedef <a class="el" href="structuartmod.html">uartmod</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a20">UARTMOD_INFO</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maintain central per-M-Module Info about each M45N/M69N/M77 For M77/M69N 4 structs are allocated, for M45N 8. <br><br></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a44">men_uart_tx_empty</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check if UART transmit Register is empty </em> <a href="#a44"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a45">men_uart_set_mctrl</a> (struct uart_port *port, unsigned int mctrl)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set Modem Control Register, called from core ioctl function </em> <a href="#a45"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a46">men_uart_get_mctrl</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return Modem Control Register and return as TIO* Values, for ioctl call </em> <a href="#a46"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a47">men_uart_stop_tx</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">highlevel TX stop function called by serial_core </em> <a href="#a47"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a48">men_uart_start_tx</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">transmit start function </em> <a href="#a48"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a49">men_uart_stop_rx</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">receive stop function </em> <a href="#a49"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a50">men_uart_enable_ms</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">receive stop function </em> <a href="#a50"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a51">men_uart_break_ctl</a> (struct uart_port *port, int break_state)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set Set break control </em> <a href="#a51"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a52">men_uart_startup</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">central UART channel startup function, called upon each open to /dev/ttyDx Wakes up and initialize UART. Gets called whenever a process opens /dev/ttyDx. When passed at module load time the ACR is set such that for M077 </em> <a href="#a52"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a53">men_uart_shutdown</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">central UART shutdown function, called upon funal close of port /dev/ttyDx </em> <a href="#a53"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a54">men_uart_set_termios</a> (struct uart_port *port, struct ktermios *termios, struct ktermios *old)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function to set changed tty settings this is the central link between higher tty layer and the UART Hardware to change all aspects of the Channel like Baudrate, data bit settings etc. Its called everytime a property of the channel is changed e.g. with stty. </em> <a href="#a54"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a58">men_uart_config_port</a> (struct uart_port *port, int flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">highlevel UART Port config function </em> <a href="#a58"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a59">men_uart_type</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return Port type name </em> <a href="#a59"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a61">men_uart_ioctl</a> (struct uart_port *up, unsigned int cmd, unsigned long arg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main HW dependent Ioctl function. </em> <a href="#a61"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a62">register_uarts</a> (<a class="el" href="structuartmod.html">UARTMOD_INFO</a> *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register the 4 or 8 UART Channels of this M-Module. </em> <a href="#a62"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a63">serial_in</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, int offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">basic UART Register read function </em> <a href="#a63"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a64">serial_out</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, int offset, int value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">basic UART Register write function </em> <a href="#a64"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a65">control_in</a> (char *base, int offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">basic UART Register read function </em> <a href="#a65"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a66">control_out</a> (char *base, int offset, int value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">basic UART control Register write function </em> <a href="#a66"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>unsigned char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a67">serial_efr_read</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, int offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read from 650 compatible Register indexed through EFR. </em> <a href="#a67"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a68">serial_efr_write</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, int offset, int value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to 650 compatible Register indexed through EFR. </em> <a href="#a68"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a69">set_inband_flowctrl</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, unsigned char en)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Control Software XON/XOFF handshaking in EFR. </em> <a href="#a69"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a70">serial_icr_write</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, int offset, int value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to 16C950 Indexed Control Register set. </em> <a href="#a70"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a71">serial_icr_read</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, int offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read from an 16C950 Indexed Control Register. </em> <a href="#a71"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a72">men_uart_clear_fifos</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear UART FIFOs. </em> <a href="#a72"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a73">men_uart_set_sleep</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, int sleep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">IER sleep support, Unused in this driver. </em> <a href="#a73"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a74">men_uart_m77phy</a> (struct uart_port *up, unsigned int cmd, unsigned long arg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ioctl function to treat special codes not handled in serial_core.c. </em> <a href="#a74"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a75">autoconfig_16550a</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Toplevel 16550 + compatibles autoconfig function. </em> <a href="#a75"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a76">autoconfig</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, unsigned int probeflags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Toplevel Autoconfig function This is called to determine what type of UART chip this serial port is, using: 8250, 16450, 16550, 16550A. </em> <a href="#a76"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a77">__stop_tx</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lowlevel TX Stop function, by clearing Threshold IRQ </em> <a href="#a77"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a78">transmit_chars</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">central transmit function, called in ISR </em> <a href="#a78"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a79">receive_chars</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, int *status, struct pt_regs *regs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">receive chars function, called within ISR </em> <a href="#a79"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a80">check_modem_status</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check_modem_status Bits </em> <a href="#a80"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a81">men_uart_handle_port</a> (struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *up, struct pt_regs *regs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">handles the interrupt from one port, within ISR </em> <a href="#a81"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a82">M77_IrqHandler</a> (void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">handles the interrupt from one M-Module The original 8250.c UART interrupt handler is now Registered via mdis_install_external_irq(). Its taylored to match the Requirements of serving the M45N/M69N/M77 Interrupts only. No calls to request_irq() are done within this driver. </em> <a href="#a82"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a83">men_uart_get_divisor</a> (struct uart_port *port, unsigned int baud)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate Baudrate Divisor. </em> <a href="#a83"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a84">men_uart_find_match_or_unused</a> (struct uart_port *port)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return next free UART from internal UART Array We are free to use the ttyDxx entries by ourselves So just return the next free men_uart_ports[i].port. This is simplified from <a class="el" href="8250_8c.html#a82">serial8250_find_match_or_unused()</a>. </em> <a href="#a84"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a85">men_uart_register_port</a> (struct uart_port *port, unsigned int modtype, unsigned int nrLine, struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> **glob)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to register each 4 or 8 UART Channels of a M-Module at serial core. </em> <a href="#a85"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a86">men_uart_unregister_port</a> (int line)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove one serial port. </em> <a href="#a86"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a87" doxytag="serial_m77_26.c::men_uart_init_ports"></a>
void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a87">men_uart_init_ports</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the global Array of Oxford UARTs. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a88">deinit_devices</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deinitialize all registered M-Modules. </em> <a href="#a88"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a89">parse_m77_phyinfo</a> (<a class="el" href="structuartmod.html">UARTMOD_INFO</a> *mmod_data, unsigned int idx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Select the M77 phymode. </em> <a href="#a89"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a90">m77_init_devices</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">main enumeration and initialization Function of all Modules The passed module Parameters are parsed and for each given Module and a call to mdis_open_external_dev() is done. For each new carrier board a call to mdis_install_external_irq() is done because from CPU View the IRQ s of all M-Modules on the same Carrier are equal. </em> <a href="#a90"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a91" doxytag="serial_m77_26.c::m77_serial_init"></a>
int __init&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a91">m77_serial_init</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">module init function <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a92" doxytag="serial_m77_26.c::m77_serial_cleanup"></a>
void __exit&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a92">m77_serial_cleanup</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Driver's cleanup routine. <br><br></td></tr>
<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a29" doxytag="serial_m77_26.c::uart_config"></a>
const struct <a class="el" href="structmen__uart__config.html">men_uart_config</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a29">uart_config</a> []</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">basic UART Port definitions <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a30" doxytag="serial_m77_26.c::men_uart_reg"></a>
uart_driver&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a30">men_uart_reg</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main serial driver struct. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a31" doxytag="serial_m77_26.c::men_uart_pops"></a>
uart_ops&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="serial__m77__26_8c.html#a31">men_uart_pops</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The HW-dependent port operations called by the core driver. <br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Kernel 2.6 driver for M77 modules Attention: Instanciate carrier Board MDIS device prior to modprobe'ing this driver! 
<p>
<dl compact><dt><b>Author:</b></dt><dd>thomas schnuerer <dl compact><dt><b>Date</b></dt><dd>2014/07/15 10:40:27 </dd></dl>
<dl compact><dt><b>Revision</b></dt><dd>1.19 </dd></dl>
</dd></dl>
<p>
Features<ul>
<li>All standard baudrates up to 1152000 Baud ( only RS422/485 with &gt; 115200 )</li></ul>
<p>
Switches: -<hr><h2>Function Documentation</h2>
<a name="a77" doxytag="serial_m77_26.c::__stop_tx"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void __stop_tx </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
lowlevel TX Stop function, by clearing Threshold IRQ 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>p</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a76" doxytag="serial_m77_26.c::autoconfig"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void autoconfig </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>probeflags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Toplevel Autoconfig function This is called to determine what type of UART chip this serial port is, using: 8250, 16450, 16550, 16550A. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>probeflags</em>&nbsp;</td><td><b>IN</b> one of UPF_*, see serial_core.h</td></tr>
  </table>
</dl>
<p>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a75" doxytag="serial_m77_26.c::autoconfig_16550a"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void autoconfig_16550a </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>up</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Toplevel 16550 + compatibles autoconfig function. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a80" doxytag="serial_m77_26.c::check_modem_status"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void check_modem_status </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>up</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
check_modem_status Bits 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a65" doxytag="serial_m77_26.c::control_in"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int control_in </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>base</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
basic UART Register read function 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>base</em>&nbsp;</td><td><b>IN</b> base control register address to read from </td></tr>
    <tr><td valign=top><em>offset</em>&nbsp;</td><td><b>IN</b> Register offset for this address</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Value read from given Register </dd></dl>
    </td>
  </tr>
</table>
<a name="a66" doxytag="serial_m77_26.c::control_out"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void control_out </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>base</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
basic UART control Register write function 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>offset</em>&nbsp;</td><td><b>IN</b> Register offset for address </td></tr>
    <tr><td valign=top><em>value</em>&nbsp;</td><td><b>IN</b> Value to write to Register</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a88" doxytag="serial_m77_26.c::deinit_devices"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void deinit_devices </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deinitialize all registered M-Modules. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a90" doxytag="serial_m77_26.c::m77_init_devices"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int m77_init_devices </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
main enumeration and initialization Function of all Modules The passed module Parameters are parsed and for each given Module and a call to mdis_open_external_dev() is done. For each new carrier board a call to mdis_install_external_irq() is done because from CPU View the IRQ s of all M-Modules on the same Carrier are equal. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or negative error code </dd></dl>
    </td>
  </tr>
</table>
<a name="a82" doxytag="serial_m77_26.c::M77_IrqHandler"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int M77_IrqHandler </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>data</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
handles the interrupt from one M-Module The original 8250.c UART interrupt handler is now Registered via mdis_install_external_irq(). Its taylored to match the Requirements of serving the M45N/M69N/M77 Interrupts only. No calls to request_irq() are done within this driver. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>data</em>&nbsp;</td><td><b>IN</b> void Parameter from MDIS Irq handler</td></tr>
  </table>
</dl>
<p>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a51" doxytag="serial_m77_26.c::men_uart_break_ctl"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_break_ctl </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname" nowrap> <em>port</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>break_state</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
set Set break control 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>break_state</em>&nbsp;</td><td><b>IN</b> state to set, -1: set break, != -1:clear</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a72" doxytag="serial_m77_26.c::men_uart_clear_fifos"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_clear_fifos </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>up</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clear UART FIFOs. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a58" doxytag="serial_m77_26.c::men_uart_config_port"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_config_port </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname" nowrap> <em>port</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
highlevel UART Port config function 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel UART Port Struct </td></tr>
    <tr><td valign=top><em>flags</em>&nbsp;</td><td><b>IN</b> optional flags to control probing</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a50" doxytag="serial_m77_26.c::men_uart_enable_ms"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_enable_ms </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
receive stop function 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel uart_port Struct (as in serial_core)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a84" doxytag="serial_m77_26.c::men_uart_find_match_or_unused"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structox16c954__port.html">ox16c954_port</a>* men_uart_find_match_or_unused </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
return next free UART from internal UART Array We are free to use the ttyDxx entries by ourselves So just return the next free men_uart_ports[i].port. This is simplified from <a class="el" href="8250_8c.html#a82">serial8250_find_match_or_unused()</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel UART Port Struct</td></tr>
  </table>
</dl>
<p>
<dl compact><dt><b>Returns:</b></dt><dd>pointer to port struct </dd></dl>
    </td>
  </tr>
</table>
<a name="a83" doxytag="serial_m77_26.c::men_uart_get_divisor"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int men_uart_get_divisor </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname" nowrap> <em>port</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>baud</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Calculate Baudrate Divisor. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>baud</em>&nbsp;</td><td><b>IN</b> Baudrate Value, 300-1152000</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Divisor with respect to Clock 18,432 MHz </dd></dl>
    </td>
  </tr>
</table>
<a name="a46" doxytag="serial_m77_26.c::men_uart_get_mctrl"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int men_uart_get_mctrl </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
return Modem Control Register and return as TIO* Values, for ioctl call 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>encoded MSR Bits </dd></dl>
    </td>
  </tr>
</table>
<a name="a81" doxytag="serial_m77_26.c::men_uart_handle_port"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_handle_port </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct pt_regs *&nbsp;</td>
          <td class="mdname" nowrap> <em>regs</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
handles the interrupt from one port, within ISR 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>regs</em>&nbsp;</td><td><b>IN</b> passed from ISR but unused</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a61" doxytag="serial_m77_26.c::men_uart_ioctl"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int men_uart_ioctl </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>arg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Main HW dependent Ioctl function. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>cmd</em>&nbsp;</td><td><b>IN</b> ioctl type, see <a class="el" href="serial__m77_8h.html">serial_m77.h</a> </td></tr>
    <tr><td valign=top><em>arg</em>&nbsp;</td><td><b>IN</b> ioctl argument, see <a class="el" href="serial__m77_8h.html">serial_m77.h</a></td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 or negative error number </dd></dl>
    </td>
  </tr>
</table>
<a name="a74" doxytag="serial_m77_26.c::men_uart_m77phy"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int men_uart_m77phy </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>arg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ioctl function to treat special codes not handled in serial_core.c. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> highlevel (serial core) Port Struct </td></tr>
    <tr><td valign=top><em>cmd</em>&nbsp;</td><td><b>IN</b> ioctl type, see <a class="el" href="serial__m77_8h.html">serial_m77.h</a> </td></tr>
    <tr><td valign=top><em>arg</em>&nbsp;</td><td><b>IN</b> ioctl argument, see <a class="el" href="serial__m77_8h.html">serial_m77.h</a></td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 or negative error number </dd></dl>
    </td>
  </tr>
</table>
<a name="a85" doxytag="serial_m77_26.c::men_uart_register_port"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int men_uart_register_port </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname" nowrap> <em>port</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>modtype</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>nrLine</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>glob</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Function to register each 4 or 8 UART Channels of a M-Module at serial core. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel UART Port Struct </td></tr>
    <tr><td valign=top><em>modtype</em>&nbsp;</td><td><b>IN</b> Module ID as in 13m07790.xml </td></tr>
    <tr><td valign=top><em>nrLine</em>&nbsp;</td><td><b>IN</b> UART Line number as in /dev/ttyDn </td></tr>
    <tr><td valign=top><em>glob</em>&nbsp;</td><td><b>OUT</b> returned OX16C954 UART, stored in UARTMOD_INFO array</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 or negative error number </dd></dl>
    </td>
  </tr>
</table>
<a name="a45" doxytag="serial_m77_26.c::men_uart_set_mctrl"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_set_mctrl </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname" nowrap> <em>port</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>mctrl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
set Modem Control Register, called from core ioctl function 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>mctrl</em>&nbsp;</td><td><b>IN</b> MSR Bits to set</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a73" doxytag="serial_m77_26.c::men_uart_set_sleep"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_set_sleep </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>sleep</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
IER sleep support, Unused in this driver. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>sleep</em>&nbsp;</td><td><b>IN</b> state of sleep mode</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a54" doxytag="serial_m77_26.c::men_uart_set_termios"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_set_termios </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname" nowrap> <em>port</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct ktermios *&nbsp;</td>
          <td class="mdname" nowrap> <em>termios</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct ktermios *&nbsp;</td>
          <td class="mdname" nowrap> <em>old</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
function to set changed tty settings this is the central link between higher tty layer and the UART Hardware to change all aspects of the Channel like Baudrate, data bit settings etc. Its called everytime a property of the channel is changed e.g. with stty. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel UART Port Struct </td></tr>
    <tr><td valign=top><em>termios</em>&nbsp;</td><td><b>IN</b> termios struct with new settings </td></tr>
    <tr><td valign=top><em>old</em>&nbsp;</td><td><b>IN</b> termios struct to keep old settings(?)</td></tr>
  </table>
</dl>
<p>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a53" doxytag="serial_m77_26.c::men_uart_shutdown"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_shutdown </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
central UART shutdown function, called upon funal close of port /dev/ttyDx 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 or error code </dd></dl>
    </td>
  </tr>
</table>
<a name="a48" doxytag="serial_m77_26.c::men_uart_start_tx"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_start_tx </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
transmit start function 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel (serial core) Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a52" doxytag="serial_m77_26.c::men_uart_startup"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int men_uart_startup </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
central UART channel startup function, called upon each open to /dev/ttyDx Wakes up and initialize UART. Gets called whenever a process opens /dev/ttyDx. When passed at module load time the ACR is set such that for M077 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 or error code</dd></dl>
    </td>
  </tr>
</table>
<a name="a49" doxytag="serial_m77_26.c::men_uart_stop_rx"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_stop_rx </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
receive stop function 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel (serial core) Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a47" doxytag="serial_m77_26.c::men_uart_stop_tx"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_stop_tx </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
highlevel TX stop function called by serial_core 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel uart_port Struct (as in serial_core)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a44" doxytag="serial_m77_26.c::men_uart_tx_empty"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int men_uart_tx_empty </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
check if UART transmit Register is empty 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel uart_port Struct (as in serial_core)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TIOCSER_TEMT if empty or 0 </dd></dl>
    </td>
  </tr>
</table>
<a name="a59" doxytag="serial_m77_26.c::men_uart_type"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const char * men_uart_type </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct uart_port *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
return Port type name 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>port</em>&nbsp;</td><td><b>IN</b> highlevel UART Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>char pointer to string, typically "16C954" here </dd></dl>
    </td>
  </tr>
</table>
<a name="a86" doxytag="serial_m77_26.c::men_uart_unregister_port"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_uart_unregister_port </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>line</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove one serial port. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>line</em>&nbsp;</td><td><b>IN</b> serial line number</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a89" doxytag="serial_m77_26.c::parse_m77_phyinfo"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void parse_m77_phyinfo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structuartmod.html">UARTMOD_INFO</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>mmod_data</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>idx</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Select the M77 phymode. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>mod</em>&nbsp;</td><td><b>IN</b> per-module struct of M-Module data</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a79" doxytag="serial_m77_26.c::receive_chars"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void receive_chars </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>status</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct pt_regs *&nbsp;</td>
          <td class="mdname" nowrap> <em>regs</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
receive chars function, called within ISR 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>status</em>&nbsp;</td><td><b>OUT</b> new Value of LSR Register </td></tr>
    <tr><td valign=top><em>regs</em>&nbsp;</td><td><b>IN</b> pt_regs parameter from ISR (unused)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a62" doxytag="serial_m77_26.c::register_uarts"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int register_uarts </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structuartmod.html">UARTMOD_INFO</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>mod</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Register the 4 or 8 UART Channels of this M-Module. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>mod</em>&nbsp;</td><td><b>IN</b> per-module struct of M-Module data</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or error code </dd></dl>
    </td>
  </tr>
</table>
<a name="a67" doxytag="serial_m77_26.c::serial_efr_read"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned char serial_efr_read </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read from 650 compatible Register indexed through EFR. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>offset</em>&nbsp;</td><td><b>IN</b> Register offset for address, to be shifted by 1</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Value read from EFR </dd></dl>
    </td>
  </tr>
</table>
<a name="a68" doxytag="serial_m77_26.c::serial_efr_write"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void serial_efr_write </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write to 650 compatible Register indexed through EFR. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>offset</em>&nbsp;</td><td><b>IN</b> Register offset for address, to be shifted by 1 </td></tr>
    <tr><td valign=top><em>value</em>&nbsp;</td><td><b>IN</b> Value to write to Register</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a71" doxytag="serial_m77_26.c::serial_icr_read"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int serial_icr_read </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read from an 16C950 Indexed Control Register. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>offset</em>&nbsp;</td><td><b>IN</b> Register offset for address</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Value read from indexed Register </dd></dl>
    </td>
  </tr>
</table>
<a name="a70" doxytag="serial_m77_26.c::serial_icr_write"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void serial_icr_write </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write to 16C950 Indexed Control Register set. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>offset</em>&nbsp;</td><td><b>IN</b> Register offset for address </td></tr>
    <tr><td valign=top><em>value</em>&nbsp;</td><td><b>IN</b> Register Value to write (see Datasheet p.20)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a63" doxytag="serial_m77_26.c::serial_in"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int serial_in </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
basic UART Register read function 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>offset</em>&nbsp;</td><td><b>IN</b> Register offset for address</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Value read from given Register </dd></dl>
    </td>
  </tr>
</table>
<a name="a64" doxytag="serial_m77_26.c::serial_out"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void serial_out </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
basic UART Register write function 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>offset</em>&nbsp;</td><td><b>IN</b> Register offset for address </td></tr>
    <tr><td valign=top><em>value</em>&nbsp;</td><td><b>IN</b> Value to write to Register</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a69" doxytag="serial_m77_26.c::set_inband_flowctrl"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void set_inband_flowctrl </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>up</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>en</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Control Software XON/XOFF handshaking in EFR. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct </td></tr>
    <tr><td valign=top><em>en</em>&nbsp;</td><td><b>IN</b> 0: disable XON/XOFF Flowcontrol else enable it</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>
<a name="a78" doxytag="serial_m77_26.c::transmit_chars"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void transmit_chars </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structox16c954__port.html">ox16c954_port</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>up</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
central transmit function, called in ISR 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>up</em>&nbsp;</td><td><b>IN</b> Oxford 16C954 Port Struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- </dd></dl>
    </td>
  </tr>
</table>

	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for Linux native Driver for M45N/M69N/M77 UART Modules using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2014 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

